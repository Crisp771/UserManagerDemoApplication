/*
Deployment script for iForceExampleDatabase

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "iForceExampleDatabase"
:setvar DefaultFilePrefix "iForceExampleDatabase"
:setvar DefaultDataPath "F:\Program Files\Microsoft SQL Server\MSSQL13.SQLEXPRESS\MSSQL\DATA\"
:setvar DefaultLogPath "F:\Program Files\Microsoft SQL Server\MSSQL13.SQLEXPRESS\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
/*
Post-Deployment Script Template							
--------------------------------------------------------------------------------------
 This file contains SQL statements that will be appended to the build script.		
 Use SQLCMD syntax to include a file in the post-deployment script.			
 Example:      :r .\myfile.sql								
 Use SQLCMD syntax to reference a variable in the post-deployment script.		
 Example:      :setvar TableName MyTable							
               SELECT * FROM [$(TableName)]					
--------------------------------------------------------------------------------------
*/

-- Lookup Tables
MERGE INTO Roles AS Target 
USING (VALUES 
  (1, N'Administrator'), 
  (2, N'Manager'), 
  (3, N'User')
) 
AS Source (Id, Name) 
ON Target.Id = Source.Id 
WHEN MATCHED THEN 
UPDATE SET Name = Source.Name 
WHEN NOT MATCHED BY TARGET THEN 
INSERT (Id, Name) 
VALUES (Id, Name) 
WHEN NOT MATCHED BY SOURCE THEN 
DELETE;

MERGE INTO Statuses AS Target 
USING (VALUES 
  (1, N'New'), 
  (2, N'Active'), 
  (3, N'Disabled')
) 
AS Source (Id, Name) 
ON Target.Id = Source.Id 
WHEN MATCHED THEN 
UPDATE SET Name = Source.Name 
WHEN NOT MATCHED BY TARGET THEN 
INSERT (Id, Name) 
VALUES (Id, Name) 
WHEN NOT MATCHED BY SOURCE THEN 
DELETE;

--Make sure user table is clean

DELETE FROM Users;

-- Generated by a handy tool at www.mockaroo.com
insert into Users (name, roleid, updatedat, statusid) values ('Corrie Fronks', 1, '2017-01-15 20:56:13', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Sammy Taffarello', 2, '2017-05-03 15:04:20', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Jaine Winsper', 1, '2017-08-29 17:36:43', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Cynde Kuschke', 3, '2017-07-19 07:50:46', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Elmira Rutty', 1, '2016-12-30 15:45:11', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Chris Glewe', 3, '2016-10-01 10:12:57', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Cissy Jurkowski', 3, '2017-05-21 00:07:02', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Celka Matfin', 3, '2016-09-12 19:24:50', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Martyn Huortic', 1, '2017-01-03 18:50:51', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Ruddy Kingescot', 2, '2017-04-06 19:09:33', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Maurise McKirton', 2, '2016-10-20 07:24:53', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Hanni Paydon', 1, '2016-11-21 21:36:57', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Birgit Fever', 2, '2016-10-29 13:35:22', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Barnie Symones', 3, '2016-12-19 08:49:08', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Codie McCreedy', 3, '2017-04-11 08:12:39', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Shurlock Trevenu', 2, '2016-12-15 22:50:46', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Brina Kinny', 1, '2017-09-03 09:51:12', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Nikos Houndsom', 3, '2017-08-23 17:14:43', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Pauline Mancer', 1, '2017-02-13 06:39:20', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Frazier Fennessy', 2, '2016-11-04 01:56:43', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Dick Archbutt', 3, '2017-01-27 20:36:47', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Serena Tipper', 2, '2016-10-18 14:03:09', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Yule Ludovico', 2, '2016-09-20 10:10:59', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Taffy Peye', 2, '2017-04-06 14:14:02', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Briana Darbey', 2, '2017-04-25 08:26:39', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Wilhelm Rothchild', 1, '2017-04-03 01:46:27', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Trumaine Saltwell', 2, '2017-06-12 06:58:05', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Brook McFadyen', 3, '2017-07-20 11:40:16', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Siobhan Darling', 1, '2016-12-13 20:22:30', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Bonnibelle Di Maria', 1, '2017-08-07 03:11:35', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Madel Nitti', 3, '2016-09-27 13:28:51', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Jania Garnson', 3, '2017-05-31 02:11:05', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Leopold Bleasdale', 2, '2017-08-28 14:05:36', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Barbi Beddows', 1, '2017-05-16 17:29:27', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Lief Smissen', 1, '2017-06-16 00:37:29', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Derron Lees', 3, '2017-04-01 04:37:53', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Birgit Czajkowska', 3, '2016-12-13 15:20:44', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Kendall Hawkswood', 1, '2017-09-02 19:50:31', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Nola Doubrava', 3, '2017-04-01 04:24:16', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Ivor Albisser', 1, '2017-05-22 01:54:09', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Florencia Burdass', 3, '2017-05-03 17:25:06', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Kaye Ramsey', 3, '2016-09-19 08:50:15', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Ayn Patridge', 1, '2017-05-08 22:12:49', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Jolee Dowyer', 1, '2016-09-22 10:09:47', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Lonna Gallifont', 3, '2016-10-20 13:25:47', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Christoforo Amber', 1, '2017-03-18 09:28:24', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Filippa Ledeker', 2, '2017-06-02 23:52:15', 1);
insert into Users (name, roleid, updatedat, statusid) values ('Dolli Ferne', 3, '2017-01-13 18:48:48', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Paten Veracruysse', 2, '2017-07-03 07:37:26', 2);
insert into Users (name, roleid, updatedat, statusid) values ('Seymour Mallinar', 2, '2017-02-20 15:14:27', 3);

GO

GO
PRINT N'Update complete.';


GO
