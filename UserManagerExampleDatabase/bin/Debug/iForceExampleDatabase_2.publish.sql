/*
Deployment script for iForceExampleDatabase

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "iForceExampleDatabase"
:setvar DefaultFilePrefix "iForceExampleDatabase"
:setvar DefaultDataPath "F:\Program Files\Microsoft SQL Server\MSSQL13.SQLEXPRESS\MSSQL\DATA\"
:setvar DefaultLogPath "F:\Program Files\Microsoft SQL Server\MSSQL13.SQLEXPRESS\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
/*
Post-Deployment Script Template							
--------------------------------------------------------------------------------------
 This file contains SQL statements that will be appended to the build script.		
 Use SQLCMD syntax to include a file in the post-deployment script.			
 Example:      :r .\myfile.sql								
 Use SQLCMD syntax to reference a variable in the post-deployment script.		
 Example:      :setvar TableName MyTable							
               SELECT * FROM [$(TableName)]					
--------------------------------------------------------------------------------------
*/

-- Lookup Tables
MERGE INTO Roles AS Target 
USING (VALUES 
  (1, N'Administrator'), 
  (2, N'Manager'), 
  (3, N'User')
) 
AS Source (Id, Name) 
ON Target.Id = Source.Id 
WHEN MATCHED THEN 
UPDATE SET Name = Source.Name 
WHEN NOT MATCHED BY TARGET THEN 
INSERT (Id, Name) 
VALUES (Id, Name) 
WHEN NOT MATCHED BY SOURCE THEN 
DELETE;

MERGE INTO Statuses AS Target 
USING (VALUES 
  (1, N'New'), 
  (2, N'Active'), 
  (3, N'Disabled')
) 
AS Source (Id, Name) 
ON Target.Id = Source.Id 
WHEN MATCHED THEN 
UPDATE SET Name = Source.Name 
WHEN NOT MATCHED BY TARGET THEN 
INSERT (Id, Name) 
VALUES (Id, Name) 
WHEN NOT MATCHED BY SOURCE THEN 
DELETE;

--Make sure user table is clean

DELETE FROM Users;

-- Generated by a handy tool at www.mockaroo.com
insert into Users (name, roleid, updatedat, statusid) values ('Hammad Howel', 91, '2017-07-19 07:55:16', 26);
insert into Users (name, roleid, updatedat, statusid) values ('Paige Hoy', 56, '2017-01-04 14:49:43', 75);
insert into Users (name, roleid, updatedat, statusid) values ('Cassandre Jessopp', 90, '2017-01-15 17:50:26', 21);
insert into Users (name, roleid, updatedat, statusid) values ('Josepha Hairyes', 92, '2017-04-06 07:11:59', 40);
insert into Users (name, roleid, updatedat, statusid) values ('Stoddard Piesing', 83, '2017-01-08 19:19:40', 65);
insert into Users (name, roleid, updatedat, statusid) values ('Meade O''Henecan', 37, '2017-01-31 09:13:14', 52);
insert into Users (name, roleid, updatedat, statusid) values ('Reuben Garvan', 56, '2016-10-23 03:02:54', 63);
insert into Users (name, roleid, updatedat, statusid) values ('Ganny Dancy', 75, '2017-04-24 20:23:03', 84);
insert into Users (name, roleid, updatedat, statusid) values ('Ilise Bestman', 11, '2017-03-28 16:29:44', 83);
insert into Users (name, roleid, updatedat, statusid) values ('Meir Sybbe', 97, '2017-09-02 16:17:59', 86);
insert into Users (name, roleid, updatedat, statusid) values ('Louis Corderoy', 16, '2017-06-30 18:58:59', 50);
insert into Users (name, roleid, updatedat, statusid) values ('Ava Hakonsson', 7, '2017-02-20 22:13:09', 37);
insert into Users (name, roleid, updatedat, statusid) values ('Catha Gerhartz', 83, '2017-02-12 07:53:54', 41);
insert into Users (name, roleid, updatedat, statusid) values ('Kinny Elkington', 1, '2017-01-25 03:51:07', 24);
insert into Users (name, roleid, updatedat, statusid) values ('Norry Janaud', 44, '2016-12-17 23:18:44', 87);
insert into Users (name, roleid, updatedat, statusid) values ('Lesley Weeden', 17, '2017-02-08 03:02:50', 3);
insert into Users (name, roleid, updatedat, statusid) values ('Silvano O''Hdirscoll', 100, '2017-01-16 00:30:56', 14);
insert into Users (name, roleid, updatedat, statusid) values ('Leigh Estoile', 34, '2016-10-30 10:36:43', 85);
insert into Users (name, roleid, updatedat, statusid) values ('Derrek Edmonds', 54, '2017-04-23 18:29:07', 46);
insert into Users (name, roleid, updatedat, statusid) values ('Iggy Nigh', 23, '2017-01-29 02:43:30', 41);
insert into Users (name, roleid, updatedat, statusid) values ('Curtis Drinkhall', 67, '2017-05-01 10:52:03', 81);
insert into Users (name, roleid, updatedat, statusid) values ('Alec Dillet', 82, '2017-01-17 01:52:29', 63);
insert into Users (name, roleid, updatedat, statusid) values ('Rana Phillip', 61, '2016-10-17 15:27:59', 27);
insert into Users (name, roleid, updatedat, statusid) values ('Sarita Daile', 78, '2017-08-27 05:25:03', 4);
insert into Users (name, roleid, updatedat, statusid) values ('Dugald Huikerby', 12, '2017-07-27 07:42:25', 37);
insert into Users (name, roleid, updatedat, statusid) values ('Geri Laytham', 83, '2017-07-25 06:25:53', 73);
insert into Users (name, roleid, updatedat, statusid) values ('Lin Mott', 58, '2016-12-29 23:41:03', 14);
insert into Users (name, roleid, updatedat, statusid) values ('Irene Tranfield', 45, '2017-07-30 20:11:16', 33);
insert into Users (name, roleid, updatedat, statusid) values ('Demetris Gostall', 38, '2016-09-11 13:17:45', 74);
insert into Users (name, roleid, updatedat, statusid) values ('Xena Storcke', 91, '2017-07-21 17:14:59', 67);
insert into Users (name, roleid, updatedat, statusid) values ('Novelia Escale', 23, '2017-03-09 01:43:57', 32);
insert into Users (name, roleid, updatedat, statusid) values ('Junie Tesimon', 84, '2016-11-29 13:46:18', 13);
insert into Users (name, roleid, updatedat, statusid) values ('Saraann Treverton', 56, '2017-05-11 00:12:37', 13);
insert into Users (name, roleid, updatedat, statusid) values ('Mandy Kelf', 20, '2016-11-19 16:50:55', 83);
insert into Users (name, roleid, updatedat, statusid) values ('Whitman Culshaw', 21, '2017-04-25 08:40:37', 67);
insert into Users (name, roleid, updatedat, statusid) values ('Loutitia Dossetter', 35, '2017-03-28 13:25:43', 93);
insert into Users (name, roleid, updatedat, statusid) values ('Joelynn Osgarby', 96, '2017-05-21 20:14:18', 100);
insert into Users (name, roleid, updatedat, statusid) values ('Lilah Leech', 45, '2017-08-29 07:20:00', 74);
insert into Users (name, roleid, updatedat, statusid) values ('Evangelin Winscom', 7, '2017-08-20 11:20:53', 74);
insert into Users (name, roleid, updatedat, statusid) values ('Rafaellle Bass', 2, '2017-09-03 10:42:43', 24);
insert into Users (name, roleid, updatedat, statusid) values ('Patrica Whitwood', 65, '2016-12-14 00:17:43', 7);
insert into Users (name, roleid, updatedat, statusid) values ('Reynolds Catton', 9, '2017-09-05 17:09:29', 73);
insert into Users (name, roleid, updatedat, statusid) values ('Annora Firminger', 64, '2017-02-16 20:53:26', 77);
insert into Users (name, roleid, updatedat, statusid) values ('Livy Bayless', 13, '2017-08-15 08:46:46', 65);
insert into Users (name, roleid, updatedat, statusid) values ('Delmer Feenan', 96, '2017-07-17 08:05:49', 20);
insert into Users (name, roleid, updatedat, statusid) values ('Eugenio Issakov', 20, '2017-01-22 19:43:55', 77);
insert into Users (name, roleid, updatedat, statusid) values ('Minta Gagg', 36, '2017-09-01 02:53:29', 62);
insert into Users (name, roleid, updatedat, statusid) values ('Gearard Stockin', 43, '2017-04-11 18:19:05', 60);
insert into Users (name, roleid, updatedat, statusid) values ('Karlen Brokenshire', 61, '2017-04-21 21:53:14', 75);
insert into Users (name, roleid, updatedat, statusid) values ('Paule Kellough', 80, '2016-09-14 11:33:08', 39);
GO

GO
PRINT N'Update complete.';


GO
